console.log("'Allo 'Allo!"),$(document).ready(function(){function e(e){$.each(e,function(e,t){var i=t.image,a=t.id;$(".photo-list").each(function(e){$(this).prepend('           <label style="background-image:url('+_url+i+');">             <input type="checkbox" name="photo" value="'+a+'">           </label>         ')})})}function t(){$.ajax({url:_url+"/photo/",dataType:"json",success:function(t){e(t.photo_list)}})}function i(e){var t=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;return t.test(e)}t(),$(window).load(function(){$(".slide.n1").addClass("active"),$("body").on("tap",".btn, .btn-nostyle",function(e){if(e.preventDefault(),href=$(this).attr("href").split("#"),href[1]&&$("."+href[1]).size()>0&&!$(this).is(".disabled"))if("isprinted"==href[1]){var t=$('.slide.print .photo-list input[type="checkbox"]:checked').val();$.ajax({url:_url+"/print/"+t,success:function(e){$(".slide").removeClass("active"),$("."+href[1]).addClass("active")}})}else if("isemailsend"==href[1]){var i,a=[];$('.slide.email .photo-list input[type="checkbox"]:checked').each(function(){a.push($(this).val())}),console.log(a),i=$('input[name="email"]').val();var s=$(".slide.email .photo-list").serialize();$.ajax({url:_url+"/email/",data:s+"&"+$.param({email:i}),success:function(e){console.log(e),$(".slide").removeClass("active"),$("."+href[1]).addClass("active")}})}else if("preview"==href[1]){var l=$(".participate-photo .photo-list input:checked").closest("label").css("background-image").replace("url(","").replace(")",""),n=$('.slide.answer textarea[name="answer"]').val();$(".slide.preview .text p").text(n),$(".slide.preview .photo img").attr("src",l),$(".slide").removeClass("active"),$("."+href[1]).addClass("active")}else if("participate-photo"==href[1])$(".slide.participate-photo .photo-list input").prop("checked",!1),$(".slide.participate-photo .photo-list input").change(),$(".slide").removeClass("active"),$("."+href[1]).addClass("active");else if("isparicipate"==href[1]){var s=$(".slide.participate-photo .photo-list").serialize(),o=$('.slide.answer textarea[name="answer"]').val(),c=$(".slide.socials form").serialize();$.ajax({url:_url+"/participate/",data:s+"&"+c+"&"+$.param({answer:o}),success:function(e){console.log(e),$(".slide").removeClass("active"),$("."+href[1]).addClass("active")}})}else $(".slide").removeClass("active"),$("."+href[1]).addClass("active")}),$('input[type="checkbox"][name="agree"]').change(function(){$(this).closest(".slide").find("a.btn").toggleClass("disabled")}),$('textarea[name="answer"]').bind("input propertychange",function(e){""==$(this).val()?$(this).closest(".slide").find("a.btn").addClass("disabled"):$(this).closest(".slide").find("a.btn").removeClass("disabled")}),$(".socials input").bind("input propertychange",function(e){var t="";$(".socials input").each(function(){""!=$(this).val()&&(t=$(this).val())}),""==t?$(this).closest(".slide").find("a.btn").addClass("disabled"):$(this).closest(".slide").find("a.btn").removeClass("disabled")}),$('input[name="email"]').bind("input propertychange",function(e){i($(this).val())?$(this).closest(".slide").find("a.btn").removeClass("disabled"):$(this).closest(".slide").find("a.btn").addClass("disabled")}),$("body").on("change",'.photo-list label input[type="checkbox"]',function(){var e=$(this).closest(".photo-list"),t=$(this).closest(".photo-list").find('input[type="checkbox"]'),i=e.attr("data-maxselect"),a=e.find('input[type="checkbox"]:checked').size();a>=i?t.filter(":not(:checked)").attr("disabled",!0):t.removeAttr("disabled");var s=$(this).closest(".slide");s.find('input[type="checkbox"]:checked').size()>0?s.find(".btn").removeClass("disabled"):s.find(".btn").addClass("disabled")})}),$(document).on("touchstart",".btn",function(){$(this).addClass("btn-on-active")}).on("touchend",".btn",function(){$(this).removeClass("btn-on-active")});var a=function(){var e={count:3,time:4e3,path:"images/back-",parent:".js-background",active:0},t=function(){$(e.parent).find("li").eq(e.active).addClass("active").siblings().removeClass("active"),e.active++,e.active==e.count&&(e.active=0),setTimeout(t,e.time)},i=function(){for(var i=0;i<e.count;i++)$(e.parent).append('<li style="background-image: url('+e.path+i+'.jpg);"></li>');t()};i()};a()});